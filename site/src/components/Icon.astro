---
interface Props {
  icon: string;
  class?: string;
  width?: string;
  height?: string;
}

const { icon, class: className = '', width = '1em', height = '1em' } = Astro.props;

// Usar la API de Iconify para obtener el SVG directamente
let svgContent = '';
try {
  const response = await fetch(`https://api.iconify.design/${icon}.svg`);
  if (response.ok) {
    svgContent = await response.text();
  }
} catch (error) {
  console.error(`Error loading icon ${icon}:`, error);
}
---

{svgContent ? (
  <span 
    class={`iconify-icon ${className}`} 
    set:html={svgContent.replace(/<svg/, `<svg class="icon-svg" style="width: ${width}; height: ${height};"`)}
  />
) : (
  <span class={`iconify-icon ${className}`} data-icon={icon} style={`width: ${width}; height: ${height};`}></span>
)}

<style>
  .iconify-icon {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    vertical-align: middle;
    line-height: 1;
  }
  
  .iconify-icon .icon-svg,
  .iconify-icon svg {
    display: block;
    width: 100%;
    height: 100%;
    fill: currentColor;
  }
</style>
