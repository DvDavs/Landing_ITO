---
import BaseLayout from '../layouts/BaseLayout.astro';
import venuesData from '../data/venues.json';

const municipalityLinks = {
  'Oaxaca de Ju√°rez': 'https://www.oaxaca.gob.mx/',
  'San Pablo Villa de Mitla': 'https://www.economia.gob.mx/datamexico/es/profile/geo/san-pablo-villa-de-mitla',
  'San Jacinto Amilpas': 'https://www.economia.gob.mx/datamexico/es/profile/geo/san-jacinto-amilpas',
  'Santa Cruz Xoxocotl√°n': 'https://santacruzxoxocotlan.gob.mx/',
  'San Sebasti√°n Tutla': 'https://www.sansebastiantutla.gob.mx/',
  'Santa Mar√≠a El Tule': 'https://santamariadeltule.gob.mx/',
  'Cuil√°pam de Guerrero': 'https://municipiodecuilapamdeguerrero.gob.mx/',
  'Santa Mar√≠a Atzompa': 'https://santamariatzompa.gob.mx/municipio/'
};
---

<BaseLayout 
  title="Sedes | XXXI Encuentro Escoltas y Bandas 2026"
  description="Descubre los 8 municipios anfitriones del XXXI Encuentro Nacional de Escoltas y Bandas de Guerra en Oaxaca. Conoce su riqueza cultural e hist√≥rica."
>
  <!-- Hero Section -->
  <section class="page-hero">
    <div class="hero-bg-carousel">
      <div class="hero-bg-slide" style="background-image: url('/images/sedes/atzompa.jpg')"></div>
      <div class="hero-bg-slide" style="background-image: url('/images/sedes/cuilapam.jpg')"></div>
      <div class="hero-bg-slide" style="background-image: url('/images/sedes/mitla.jpg')"></div>
      <div class="hero-bg-slide" style="background-image: url('/images/sedes/oaxacajuarez.jpg')"></div>
      <div class="hero-bg-slide" style="background-image: url('/images/sedes/san sebastian tutla.jpg')"></div>
      <div class="hero-bg-slide" style="background-image: url('/images/sedes/sanjacinto.jpeg')"></div>
      <div class="hero-bg-slide" style="background-image: url('/images/sedes/tule.jpg')"></div>
      <div class="hero-bg-slide" style="background-image: url('/images/sedes/xoxocotlan.jpeg')"></div>
    </div>
    <div class="hero-overlay"></div>
    <div class="container">
      <div class="page-hero-content">
        <span class="page-badge">8 Municipios Anfitriones</span>
        <h1 class="page-title">Sedes y Municipios</h1>
        <p class="page-subtitle">
          Oaxaca te da la Bienvenida
        </p>

        <div class="municipalities-links-container card">
          <div class="municipalities-links-image">
            <img src="/images/sedes/mapa_sedes.jpeg" alt="Mapa de municipios" />
          </div>
          <div class="municipalities-links-separator"></div>
          <div class="municipalities-links-list">
            {venuesData.map((venue) => (
              <a href={municipalityLinks[venue.name] || '#'} target="_blank" rel="noopener noreferrer" class="municipality-link">
                {venue.name}
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
                  <polyline points="15 3 21 3 21 9"></polyline>
                  <line x1="10" y1="14" x2="21" y2="3"></line>
                </svg>
              </a>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Venues Grid -->
  <section class="venues-section section-alt">
    <div class="container">
      {venuesData.map((venue, index) => (
        <div class={`venue-card ${index % 2 === 0 ? 'venue-card-left' : 'venue-card-right'}`}>
          <div class="venue-card-inner card">
            <div class="venue-header" style={`background-image: linear-gradient(rgba(27, 57, 106, 0.85), rgba(93, 133, 166, 0.85)), url('${venue.image}'); background-size: cover; background-position: center;`}>
              <div class="venue-number">{index + 1}</div>
              <div class="venue-title-section">
                <h3 class="venue-name">{venue.name}</h3>
                <div class="venue-meta">
                  <span class="venue-type-badge badge badge-primary">{venue.type}</span>
                  {venue.heritage && (
                    <span class="venue-heritage">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"></polygon>
                      </svg>
                      {venue.heritage}
                    </span>
                  )}
                </div>
              </div>
              <button class="image-preview-btn" aria-label="Ver imagen completa" data-image={venue.image} data-title={venue.name}>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"></path>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </button>
            </div>

            <div class="venue-body">
              <p class="venue-description">{venue.description}</p>

              <div class="venue-highlights">
                <h4>
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                    <polyline points="9 22 9 12 15 12 15 22"></polyline>
                  </svg>
                  Lugares de Inter√©s
                </h4>
                <ul class="highlights-list">
                  {venue.highlights.map((highlight) => (
                    <li>{highlight}</li>
                  ))}
                </ul>
              </div>

              {venue.culturalNote && (
                <div class="cultural-note">
                  <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg>
                  <p><strong>Nota Cultural:</strong> {venue.culturalNote}</p>
                </div>
              )}

              <div class="venue-president">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
                <span><strong>Presidente Municipal:</strong> {venue.president}</span>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
  </section>
  

  <!-- Cultural Highlights -->
  <section class="cultural-section section-primary">
    <div class="container">
      <div class="section-header text-center">
        <h2>Patrimonio Cultural de Oaxaca</h2>
        <p class="lead" style="color: rgba(255, 255, 255, 0.9);">
          Oaxaca es uno de los estados con mayor riqueza cultural de M√©xico
        </p>
      </div>

      <div class="grid grid-3">
        <div class="cultural-card">
          <div class="cultural-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
              <polyline points="9 22 9 12 15 12 15 22"></polyline>
            </svg>
          </div>
          <h3>Patrimonio UNESCO</h3>
          <p>
            El centro hist√≥rico de Oaxaca y la zona arqueol√≥gica de Monte Alb√°n son Patrimonio Cultural de la Humanidad desde 1987.
          </p>
        </div>

        <div class="cultural-card">
          <div class="cultural-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"></path>
              <path d="M2 12h20"></path>
            </svg>
          </div>
          <h3>16 Culturas Ind√≠genas</h3>
          <p>
            Oaxaca es hogar de 16 grupos √©tnicos diferentes, cada uno con su propia lengua, tradiciones y cosmovisi√≥n.
          </p>
        </div>

        <div class="cultural-card">
          <div class="cultural-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
              <line x1="7" y1="7" x2="7.01" y2="7"></line>
            </svg>
          </div>
          <h3>Artesan√≠as √önicas</h3>
          <p>
            Barro negro, alebrijes, textiles, mezcal y otras artesan√≠as reconocidas internacionalmente por su calidad.
          </p>
        </div>

        <div class="cultural-card">
          <div class="cultural-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"></path>
              <path d="M12 2v20"></path>
              <path d="M2 12h20"></path>
            </svg>
          </div>
          <h3>Gastronom√≠a Mundial</h3>
          <p>
            Los 7 moles oaxaque√±os, tlayudas, mezcal y chocolate son reconocidos como Patrimonio Gastron√≥mico.
          </p>
        </div>

        <div class="cultural-card">
          <div class="cultural-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
              <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
            </svg>
          </div>
          <h3>Historia Viva</h3>
          <p>
            Cuna de Benito Ju√°rez, con m√°s de 500 a√±os de historia colonial y m√°s de 3,000 a√±os de civilizaci√≥n zapoteca.
          </p>
        </div>

        <div class="cultural-card">
          <div class="cultural-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
              <circle cx="8.5" cy="8.5" r="1.5"></circle>
              <polyline points="21 15 16 10 5 21"></polyline>
            </svg>
          </div>
          <h3>Festividades √önicas</h3>
          <p>
            La Guelaguetza, D√≠a de Muertos, y m√∫ltiples fiestas patronales que reflejan la diversidad cultural oaxaque√±a.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Travel Tips -->
  <section class="tips-section">
    <div class="container">
      <div class="section-header text-center">
        <h2>Consejos para tu Visita</h2>
        <p class="lead">
          Recomendaciones para aprovechar al m√°ximo tu estancia en Oaxaca
        </p>
      </div>

      <div class="grid grid-2">
        <div class="tip-card card">
          <div class="tip-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"></path>
            </svg>
          </div>
          <h3>Mejor √âpoca</h3>
          <p>
            Febrero es una excelente √©poca para visitar Oaxaca. El clima es templado y seco, 
            con temperaturas promedio entre 15¬∞C y 28¬∞C. Se recomienda traer ropa ligera para el d√≠a 
            y una chamarra para las noches.
          </p>
        </div>

        <div class="tip-card card">
          <div class="tip-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path>
              <circle cx="9" cy="7" r="4"></circle>
              <path d="M23 21v-2a4 4 0 0 0-3-3.87"></path>
              <path d="M16 3.13a4 4 0 0 1 0 7.75"></path>
            </svg>
          </div>
          <h3>Transporte</h3>
          <p>
            Los municipios anfitriones est√°n bien conectados por carretera. Se recomienda usar 
            taxis sitio, binnibus o colectivos. Durante el evento habr√° transporte coordinado 
            entre las sedes principales.
          </p>
        </div>

        <div class="tip-card card">
          <div class="tip-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"></circle>
              <polyline points="12 6 12 12 16 14"></polyline>
            </svg>
          </div>
          <h3>Horarios</h3>
          <p>
            Los sitios tur√≠sticos generalmente abren de 9:00 a 18:00 hrs. Los restaurantes del centro 
            hist√≥rico atienden hasta las 23:00 hrs. Los mercados son m√°s activos por las ma√±anas (7:00-14:00 hrs).
          </p>
        </div>

        <div class="tip-card card">
          <div class="tip-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1"></path>
              <path d="M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4"></path>
            </svg>
          </div>
          <h3>Moneda y Pagos</h3>
          <p>
            La moneda es el peso mexicano (MXN). En el centro hist√≥rico y zonas tur√≠sticas aceptan 
            tarjetas de cr√©dito, pero es recomendable traer efectivo para mercados y peque√±os comercios.
          </p>
        </div>

        <div class="tip-card card">
          <div class="tip-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path>
              <line x1="7" y1="7" x2="7.01" y2="7"></line>
            </svg>
          </div>
          <h3>Compras</h3>
          <p>
            Los mejores lugares para artesan√≠as son el Mercado Benito Ju√°rez, Mercado 20 de Noviembre, 
            y los poblados de Santa Mar√≠a Atzompa (barro verde), San Bartolo Coyotepec (barro negro), 
            y Teotitl√°n del Valle (textiles).
          </p>
        </div>

        <div class="tip-card card">
          <div class="tip-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2z"></path>
              <path d="M12 2v20"></path>
              <path d="M2 12h20"></path>
            </svg>
          </div>
          <h3>Gastronom√≠a</h3>
          <p>
            No te pierdas las tlayudas, mole oaxaque√±o, tasajo, quesillo, mezcal y chocolate. 
            En el Mercado 20 de Noviembre encontrar√°s comida t√≠pica a precios accesibles. 
            Tambi√©n hay restaurantes de alta cocina oaxaque√±a en el centro.
          </p>
        </div>
      </div>
    </div>
  </section>
  <!-- Image Lightbox Modal -->
  <div id="image-lightbox" class="lightbox-overlay">
    <div class="lightbox-content">
      <button id="lightbox-close" class="lightbox-close">&times;</button>
      <img id="lightbox-image" src="" alt="Vista previa de sede" />
      <div id="lightbox-caption" class="lightbox-caption"></div>
    </div>
  </div>
</BaseLayout>

<script>
  function initLightbox() {
    const lightbox = document.getElementById('image-lightbox');
    const lightboxImage = document.getElementById('lightbox-image');
    const lightboxCaption = document.getElementById('lightbox-caption');
    const closeBtn = document.getElementById('lightbox-close');
    const previewBtns = document.querySelectorAll('.image-preview-btn');

    if (lightbox && lightboxImage && lightboxCaption && closeBtn) {
      // Open modal
      previewBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const imageUrl = btn.getAttribute('data-image');
          const title = btn.getAttribute('data-title');
          
          if (imageUrl) {
            lightboxImage.setAttribute('src', imageUrl);
            lightboxCaption.textContent = title || '';
            lightbox.classList.add('active');
            document.body.style.overflow = 'hidden'; // Prevent scrolling
          }
        });
      });

      // Close modal functions
      const closeModal = () => {
        lightbox.classList.remove('active');
        document.body.style.overflow = ''; // Restore scrolling
        setTimeout(() => {
            lightboxImage.setAttribute('src', '');
        }, 300); // Clear source after transition
      };

      closeBtn.addEventListener('click', closeModal);

      // Close on background click
      lightbox.addEventListener('click', (e) => {
        if (e.target === lightbox) {
          closeModal();
        }
      });

      // Close on escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && lightbox.classList.contains('active')) {
          closeModal();
        }
      });
    }
  }

  function initCarousel() {
    const carousel = document.querySelector('.hero-bg-carousel');
    if (!carousel) return;

    const slides = Array.from(carousel.querySelectorAll('.hero-bg-slide'));
    let currentIndex = 0;
    let intervalId;

    // Initialize first slide
    if (!carousel.querySelector('.active')) {
      slides[0].classList.add('active');
    }

    const nextSlide = () => {
        const nextIndex = (currentIndex + 1) % slides.length;
        
        slides[currentIndex].classList.remove('active');
        slides[nextIndex].classList.add('active');
        
        currentIndex = nextIndex;
    };

    const startAutoplay = () => {
        stopAutoplay();
        intervalId = setInterval(nextSlide, 5000);
    };

    const stopAutoplay = () => {
        if (intervalId) {
            clearInterval(intervalId);
            intervalId = null;
        }
    };

    startAutoplay();
  }

  // Run on initial load
  document.addEventListener('DOMContentLoaded', () => {
    initLightbox();
    initCarousel();
  });

  // Run on view transitions
  document.addEventListener('astro:page-load', () => {
    initLightbox();
    initCarousel();
  });
</script>

<style>
  /* Hero */
  .page-hero {
    background: transparent;
    padding: 6rem 0 3rem;
    color: white;
    position: relative;
    overflow: hidden;
  }

  .hero-bg-carousel {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0;
  }

  .hero-bg-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    opacity: 0;
    transition: opacity 1.5s ease-in-out;
    z-index: 0;
  }

  .hero-bg-slide.active {
    opacity: 1;
    z-index: 1;
  }

  .hero-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, rgba(27, 57, 106, 0.5) 0%, rgba(93, 133, 166, 0.5) 100%);
    z-index: 2;
    pointer-events: none;
  }

  .container {
    position: relative;
    z-index: 3;
  }

  .page-hero-content {
    position: relative;
    text-align: center;
    max-width: 800px;
    margin: 0 auto;
  }

  .page-badge {
    display: inline-block;
    padding: 0.5rem 1.5rem;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border-radius: var(--radius-full);
    font-weight: 600;
    font-size: 0.9375rem;
    margin-bottom: var(--spacing-md);
    border: 1px solid rgba(255, 255, 255, 0.3);
  }

  .page-title {
    color: white;
    margin-bottom: var(--spacing-sm);
  }

  .page-subtitle {
    font-size: 1.25rem;
    color: rgba(255, 255, 255, 0.9);
    font-weight: 300;
  }

  /* Intro */
  .intro-section {
    padding: var(--spacing-2xl) 0;
  }

  .intro-content h2 {
    margin-bottom: var(--spacing-md);
  }

  .intro-content p {
    font-size: 1.125rem;
    line-height: 1.8;
  }

  /* Venues */
  .venues-section {
    padding: var(--spacing-2xl) 0;
  }

  .venue-card {
    margin-bottom: var(--spacing-xl);
    animation: fadeIn 0.6s ease-out;
  }

  .venue-card-left .venue-card-inner {
    margin-left: 0;
    margin-right: auto;
    max-width: 1000px;
  }

  .venue-card-right .venue-card-inner {
    margin-left: auto;
    margin-right: 0;
    max-width: 1000px;
  }

  .venue-card-inner {
    padding: 0;
    overflow: hidden;
    border: 2px solid var(--color-border);
  }

  .venue-header {
    display: flex;
    gap: var(--spacing-md);
    padding: var(--spacing-lg);
    /* Background handled via inline styles for images */
    background-color: var(--color-primary); 
    color: white;
    align-items: flex-start;
    position: relative;
    min-height: 160px; /* Fixed height for consistency */
  }

  .image-preview-btn {
    background: rgba(255, 255, 255, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.5);
    color: white;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s ease;
    flex-shrink: 0;
    backdrop-filter: blur(4px);
  }

  .image-preview-btn:hover {
    background: white;
    color: var(--color-primary);
    transform: scale(1.1);
  }

  /* Lightbox Styles */
  .lightbox-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.9);
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
    padding: 2rem;
  }

  .lightbox-overlay.active {
    opacity: 1;
    visibility: visible;
  }

  .lightbox-content {
    position: relative;
    max-width: 90%;
    max-height: 90vh;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .lightbox-content img {
    max-width: 100%;
    max-height: 80vh;
    border-radius: 4px;
    box-shadow: 0 0 20px rgba(0,0,0,0.5);
    object-fit: contain;
  }

  .lightbox-close {
    position: absolute;
    top: -40px;
    right: -10px;
    background: none;
    border: none;
    color: white;
    font-size: 2.5rem;
    cursor: pointer;
    line-height: 1;
    transition: color 0.2s;
  }

  .lightbox-close:hover {
    color: var(--color-accent);
  }

  .lightbox-caption {
    color: white;
    margin-top: 1rem;
    font-size: 1.25rem;
    font-weight: 500;
    text-align: center;
  }

  .venue-number {
    flex-shrink: 0;
    width: 72px;
    height: 72px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    font-weight: 800;
    border: 3px solid white;
    box-shadow: var(--shadow-md);
  }

  .venue-title-section {
    flex: 1;
  }

  .venue-name {
    color: white;
    margin-bottom: 0.75rem;
    font-size: 2rem;
  }

  .venue-meta {
    display: flex;
    gap: var(--spacing-sm);
    flex-wrap: wrap;
    align-items: center;
  }

  .venue-type-badge {
    background: rgba(255, 255, 255, 0.25);
    border: 1px solid rgba(255, 255, 255, 0.4);
    color: white;
  }

  .venue-heritage {
    display: inline-flex;
    align-items: center;
    gap: 0.375rem;
    font-size: 0.875rem;
    color: var(--color-secondary);
    font-weight: 600;
  }

  .venue-heritage svg {
    flex-shrink: 0;
    fill: var(--color-secondary);
    stroke: none;
  }

  .venue-body {
    padding: var(--spacing-lg);
  }

  .venue-description {
    font-size: 1.125rem;
    line-height: 1.8;
    margin-bottom: var(--spacing-lg);
    color: var(--color-text);
  }

  .venue-highlights {
    margin-bottom: var(--spacing-lg);
    padding: var(--spacing-md);
    background: var(--color-bg-alt);
    border-radius: var(--radius-lg);
  }

  .venue-highlights h4 {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 1.125rem;
    margin-bottom: var(--spacing-sm);
    color: var(--color-primary);
  }

  .venue-highlights h4 svg {
    flex-shrink: 0;
  }

  .highlights-list {
    list-style: none;
    padding: 0;
    margin: 0;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 0.75rem;
  }

  .highlights-list li {
    position: relative;
    padding-left: 1.5rem;
    font-size: 0.9375rem;
    color: var(--color-text-light);
    line-height: 1.6;
  }

  .highlights-list li::before {
    content: '‚óÜ';
    position: absolute;
    left: 0;
    color: var(--color-secondary);
    font-size: 0.75rem;
  }

  .cultural-note {
    display: flex;
    gap: var(--spacing-sm);
    padding: var(--spacing-md);
    background: linear-gradient(135deg, #eff6ff 0%, #e0f2fe 100%);
    border-left: 4px solid var(--color-accent);
    border-radius: var(--radius-md);
    margin-bottom: var(--spacing-md);
  }

  .cultural-note svg {
    flex-shrink: 0;
    stroke: var(--color-accent);
    margin-top: 0.125rem;
  }

  .cultural-note p {
    margin: 0;
    line-height: 1.7;
  }

  .venue-president {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    padding: var(--spacing-sm) var(--spacing-md);
    background: white;
    border: 2px solid var(--color-border);
    border-radius: var(--radius-md);
    font-size: 0.9375rem;
  }

  .venue-president svg {
    flex-shrink: 0;
    stroke: var(--color-primary);
  }

  /* Map Section */
  .map-section {
    padding: var(--spacing-2xl) 0;
  }

  .map-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 0;
    overflow: hidden;
  }

  /* Old map-image style removed, moved to new block */

  .map-caption {
    padding: var(--spacing-md) var(--spacing-lg);
    background: var(--color-bg-alt);
    text-align: center;
  }

  .map-caption p {
    margin: 0;
    color: var(--color-text-light);
    line-height: 1.7;
  }

  /* Cultural Section */
  .cultural-section {
    padding: var(--spacing-2xl) 0;
  }

  .cultural-card {
    text-align: center;
    color: white;
  }

  .cultural-icon {
    width: 96px;
    height: 96px;
    margin: 0 auto var(--spacing-md);
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid rgba(255, 255, 255, 0.2);
  }

  .cultural-icon svg {
    stroke: var(--color-secondary);
  }

  .cultural-card h3 {
    color: white;
    margin-bottom: var(--spacing-sm);
    font-size: 1.375rem;
  }

  .cultural-card p {
    margin: 0;
    color: rgba(255, 255, 255, 0.9);
    line-height: 1.7;
  }

  /* Tips Section */
  .tips-section {
    padding: var(--spacing-2xl) 0;
  }

  .tip-card {
    padding: var(--spacing-lg);
    transition: all var(--transition-base);
  }

  .tip-card:hover {
    transform: translateY(-6px);
    box-shadow: var(--shadow-xl);
    border-color: var(--color-primary);
  }

  .tip-icon {
    width: 72px;
    height: 72px;
    margin: 0 auto var(--spacing-md);
    background: linear-gradient(135deg, rgba(27, 57, 106, 0.1) 0%, rgba(27, 57, 106, 0.05) 100%);
    border-radius: var(--radius-xl);
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .tip-icon svg {
    stroke: var(--color-primary);
  }

  .tip-card h3 {
    text-align: center;
    margin-bottom: var(--spacing-sm);
    font-size: 1.25rem;
  }

  .tip-card p {
    text-align: center;
    margin: 0;
    line-height: 1.7;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .venue-card-left .venue-card-inner,
    .venue-card-right .venue-card-inner {
      margin-left: auto;
      margin-right: auto;
    }

    .venue-number {
      width: 56px;
      height: 56px;
      font-size: 1.5rem;
    }

    .venue-name {
      font-size: 1.5rem;
    }

    .highlights-list {
      grid-template-columns: 1fr;
    }
  }

  /* Map and Table Layout */
  /* Map and Table Layout */
  .map-layout-grid {
    display: flex; /* Changed from grid to flex for stacking */
    flex-direction: column;
    gap: 4rem;
    align-items: center;
    max-width: 1000px; /* Reduced width for better centered look */
    margin: 0 auto;
  }

  .municipalities-table-container {
    width: 100%;
    margin: 0;
    padding: 0;
    overflow: hidden;
  }

  .map-container {
    margin: 0 auto;
    width: auto;
    max-width: 100%;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 0;
    background: transparent;
    box-shadow: none;
    border: none;
  }

  .map-image {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 0 auto;
    border-radius: var(--radius-lg);
    box-shadow: var(--shadow-lg);
  }

  .table-header {
    background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-accent) 100%);
    padding: var(--spacing-md) var(--spacing-lg);
    color: white;
  }

  .table-header h3 {
    margin: 0;
    font-size: 1.25rem;
    color: white;
  }

  .municipalities-table {
    width: 100%;
    border-collapse: collapse;
  }

  .municipalities-table th,
  .municipalities-table td {
    padding: 1rem 1.5rem;
    text-align: left;
    border-bottom: 1px solid var(--color-border);
  }

  .municipalities-table th {
    background: var(--color-bg-alt);
    font-weight: 600;
    color: var(--color-primary);
  }

  .municipalities-table tr:last-child td {
    border-bottom: none;
  }

  .municipalities-table tr:hover {
    background-color: #f8fafc;
  }

  .municipalities-table a {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: var(--color-secondary);
    text-decoration: none;
    font-weight: 500;
    transition: color 0.2s ease;
  }

  .municipalities-table a:hover {
    color: var(--color-primary);
    text-decoration: underline;
  }

  @media (max-width: 968px) {
    .map-layout-grid {
      grid-template-columns: 1fr;
    }

    .map-container {
      order: -1;
    }
  }

  /* Municipalities Links Container */
  .municipalities-links-container {
    display: flex;
    align-items: stretch;
    gap: var(--spacing-lg);
    padding: var(--spacing-lg);
    margin-top: var(--spacing-xl);
    width: 100%;
    max-width: 1400px;
    margin-left: auto;
    margin-right: auto;
    background: transparent;
    box-shadow: none;
    border: none;
  }
  
  .page-hero-content .municipalities-links-container {
    max-width: 1400px;
    width: calc(100% + 300px);
    margin-left: calc(-150px);
    margin-right: calc(-150px);
  }
  
  @media (max-width: 1200px) {
    .page-hero-content .municipalities-links-container {
      width: calc(100% + 200px);
      margin-left: calc(-100px);
      margin-right: calc(-100px);
    }
  }
  
  @media (max-width: 968px) {
    .page-hero-content .municipalities-links-container {
      width: 100%;
      margin-left: 0;
      margin-right: 0;
    }
  }

  .municipalities-links-image {
    flex-shrink: 0;
    width: 70%;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--radius-md);
  }

  .municipalities-links-image img {
    width: 100%;
    height: auto;
    max-width: 100%;
    object-fit: contain;
    display: block;
    border-radius: var(--radius-md);
  }

  .municipalities-links-separator {
    width: 2px;
    background: linear-gradient(to bottom, transparent, var(--color-border), transparent);
    flex-shrink: 0;
  }

  .municipalities-links-list {
    width: 30%;
    flex-shrink: 0;
    display: flex;
    flex-direction: column;
    /* Use space-between to distribute links evenly across the height */
     justify-content: flex-start; /* üëà en vez de space-between */
  gap: 0.4rem; /* ajusta esto a tu gusto */
    /* Adjust these percentages to match the image header and footer space */
    padding-top: 10%; 
    padding-bottom: 5%;
    padding-left: var(--spacing-md);
  }

  .municipality-link {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: white;
    text-decoration: none;
    font-weight: 500;
    padding: 0.25rem var(--spacing-sm);
    border-radius: var(--radius-md);
    transition: all 0.2s ease;
    font-size: 0.9375rem;
    line-height: 1  ;
  }

  .municipality-link:hover {
    color: var(--color-primary);
    background: var(--color-bg-alt);
    text-decoration: underline;
  }

  .municipality-link svg {
    flex-shrink: 0;
    opacity: 0.7;
  }

  .municipality-link:hover svg {
    opacity: 1;
  }

  @media (max-width: 768px) {
    .municipalities-links-container {
      flex-direction: column;
      gap: var(--spacing-md);
    }

    .municipalities-links-image {
      width: 100%;
      min-height: 200px;
    }

    .municipalities-links-separator {
      width: 100%;
      height: 2px;
      background: linear-gradient(to right, transparent, var(--color-border), transparent);
    }


    .municipalities-links-list {
      padding-left: 0;
    }
  }

  /* Carousel Styles */
  .carousel-container {
    position: relative;
    overflow: hidden;
    width: 70%; /* Match parent width */
    height: 500px; /* Fixed height for consistency */
    border-radius: var(--radius-md);
    background: #000;
  }

  .carousel-track {
    width: 100%;
    height: 100%;
    position: relative;
  }

  .carousel-slide {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
    display: flex;
    justify-content: center;
    align-items: center;
  }

  .carousel-slide.active {
    opacity: 1;
    z-index: 1;
  }

  .carousel-slide img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* or contain, depending on preference */
    display: block;
  }

  .carousel-btn {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.5);
    color: white;
    border: none;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 2;
    transition: background 0.3s;
    font-size: 1.2rem;
  }

  .carousel-btn:hover {
    background: rgba(0, 0, 0, 0.8);
  }

  .prev-btn {
    left: 10px;
  }

  .next-btn {
    right: 10px;
  }

  .carousel-indicators {
    position: absolute;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
    z-index: 2;
  }

  .indicator {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.5);
    border: none;
    cursor: pointer;
    transition: background 0.3s;
  }

  .indicator.active {
    background: white;
    transform: scale(1.2);
  }

  @media (max-width: 768px) {
    .carousel-container {
      width: 100%;
      height: 300px;
    }
  }
</style>
